<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Einkaufsliste</title>

  <!-- Einbinden des CSS-->
  <link rel="stylesheet" th:href="@{/css/ingredients.css}">
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <link rel="stylesheet" th:href="@{${themeCss}}">

  <!-- Boxicons Library für Icons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
</head>
<body>
<!-- Header einfügen -->
<div th:replace="fragments/header :: header"></div>

<div class="list-container">
  <div class="list-item">
    <h3 th:text="#{shoppingList.title}">Shopping List</h3>
    <div style="display: flex; align-items: center;">
        <div th:if="${error}" class="error-message-container" style="display: flex; align-items: center; margin-right: 10px;">
            <div th:text="#{${error}}" class="error-message" style="color: red; font-size: 0.9em;"></div>

            <!-- Delete error button (X icon) -->
            <form th:action="@{/shoppingList}" method="get" class="delete-error-form">
                <button type="submit" class="delete-error-button" style="background: none; border: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z" fill="black"></path>
                    </svg>
                </button>
            </form>
        </div>
        <form th:action="@{/shoppingList/add}" method="post" class="add-shopping-list-item">
            <label for="ingredientName"></label>
            <input id="ingredientName" name="ingredientName" type="text" placeholder="Name" required>
            <button type="submit" class="add-button" style="background: none; border: none;">
                <span class="add-icon">
                    <!-- Add Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" fill="green"></path>
                    </svg>
                </span>
            </button>
        </form>
    </div>
  </div>
    <!-- Column Titles for the ShoppingList -->
  <div class="list-item">
    <span class="item-name" style="font-weight: bold;" th:text="#{shoppingListItem.name}"></span>
    <span class="item-category" style="font-weight: bold;" th:text="#{shoppingListItem.purchaseAmount}"></span>
    <span class="item-price" style="font-weight: bold;" th:text="#{shoppingListItem.calculatedPrice}"></span>
  </div>

  <!-- ShoppingList Rows -->
  <div th:each="shoppingListItem : ${shoppingListItems}" class="list-item">
    <span th:text="${shoppingListItem.name}" class="item-name"></span>
    <span th:text="${shoppingListItem.purchaseAmount} + ${shoppingListItem.unit}" class="item-category"></span>
    <form th:action="@{/shoppingList/editAmount/{id}(id=${shoppingListItem.ingredientId})}" method="post" class="add-ingredient">
      <label for="newAmount"></label>
      <input id="newAmount" name="newAmount" type="text" th:placeholder="#{shoppingListItem.amount.new}" required>
      <button type="submit" class="add-button" style="background: none; border: none;">
        <span class="add-icon">
             <!-- Edit-Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z" color="black"></path>
            </svg>
        </span>
      </button>
    </form>
    <span th:text="${shoppingListItem.calculatedPrice} + '€'" class="item-price"></span>
  </div>
</div>

<!-- Footer einfügen -->
<footer th:replace="fragments/footer :: footer"></footer>

</body>
</html>